@{
    ViewBag.Title = "Home Page";
    string path = @System.Configuration.ConfigurationManager.AppSettings["domain"];
}

<link href="~/Themes/Myfashion/Contents/assets/vendor/datatables-bootstrap/dataTables.bootstrap.css" rel="stylesheet" />
<link href="~/Themes/Myfashion/Contents/assets/vendor/datatables-fixedheader/dataTables.fixedHeader.css" rel="stylesheet" />
<link href="~/Themes/Myfashion/Contents/assets/vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet" />
<link href="~/Themes/Myfashion/Contents/assets/css/font-awesome.min.css" rel="stylesheet" />
<div class="page-header">
    <h1 class="page-title">SocioQueue</h1>
</div>
<div class="page-content">
    <!-- Panel Basic -->
    <div class="panel panel-dark panel-bordered">
        <header class="panel-heading">
            <div class="panel-actions"></div>
            <h3 class="panel-title">  <i class="fa fa-envelope-o"></i> Queued Messages</h3>
        </header>
        <div class="panel-body">
            <table class="table table-hover dataTable table-bordered width-full" data-plugin="dataTable" id="datatables">
                
            </table>
        </div>
    </div>
    <!-- End Panel Basic -->
</div>
<script src="/Themes/@path/Contents/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="~/Themes/Myfashion/Contents/assets/vendor/datatables-bootstrap/dataTables.bootstrap.js" type="text/javascript"></script>
<script src="~/Themes/Myfashion/Contents/assets/vendor/datatables-fixedheader/dataTables.fixedHeader.js" type="text/javascript"></script>
<script src="~/Themes/Myfashion/Contents/assets/vendor/datatables-responsive/dataTables.responsive.js" type="text/javascript"></script>
<script type="text/javascript">
    function bindsocialqueue() {
        //('#bindsocialqueue').html()
        // $('.extable').load('../Publishing/loadsocialqueue');


        $.ajax({
            type: 'POST',
            url: '../Publishing/loadsocialqueue',
            success: function (msg) {
                //alert(msg);
                $('#datatables').html(msg);
            },
            async: false
        });


    };

    function deletesocialqueuemsg(msgid) {
        $('#deletesociaoqueue').modal('show');
        $('#deletebtnsocioqueue').attr('msgid', msgid);

    };


    function editsocialqueuemsg(msgid, msg) {
        $('#editsociaoqueue').modal('show');
        $('#savebtnsocioqueue').attr('msgid', msgid);
        $('#txteditsocioqueue').val(msg);
    };



    $(document).ready(function (e) {
        //$('#socialmedia').css('display', 'block');
        bindsocialqueue();
        $('#dataTables').dataTable({
            "order": [[1, "desc"]]
        });


        $('#deletebtnsocioqueue').on('click', function () {
            $('#deletesociaoqueue').modal('hide');
            var msgid = $('#deletebtnsocioqueue').attr('msgid');
            $('#' + msgid).hide();
            $.ajax({
                type: 'POST',
                url: '../Publishing/DeleteSocioQueueMessage?msgid=' + msgid,
                success: function (msg) {
                    alertify.success("Message Deleted successfully");
                },
            });
        });

        $('#savebtnsocioqueue').on('click', function () {
            //alert($('#saveeditdraft').attr('draftid'));

            var msgid = $('#savebtnsocioqueue').attr('msgid')
            var msg = $('#txteditsocioqueue').val();
            if (msg == '') {
                alertify.error("Please enter a message to save");
                return false;
            }
            $('#editsociaoqueue').modal('hide');
            //alertify.success("Liked Successfully");
            $.ajax({
                type: 'POST',
                url: '../Publishing/EditSocioQueueMessage?msgid=' + msgid + '&msg=' + msg,
                success: function (msgg) {
                    //alert(msg);
                    debugger;
                    //$('#' + msgid).next().next().html(msg);
                    // $('#editsociaoqueue').modal('hide');
                    bindsocialqueue();
                    //bindraft();
                },
                // async: false
            });
        });



    });




</script>











